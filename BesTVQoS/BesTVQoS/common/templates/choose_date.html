<link rel="stylesheet" type="text/css" href="/static-src/js/multiselectSrc/jquery.multiselect.css" />
<link rel="stylesheet" type="text/css" href="/static-src/js/ui/jquery-ui.css" />
<script type="text/javascript" src="/static-src/js/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="/static-src/js/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="/static-src/js/multiselectSrc/jquery.multiselect.js"></script>

<script type="text/javascript">
$(function(){
    $("#platformlist").multiselect({
        selectedList:1,
        height:110,
        multiple:false,
        header:false,
        minWidth:100
    });
    $("#netlist").multiselect({
        selectedList:1,
        height:110,
        multiple:false,
        header:false,
        minWidth:100
    });
    $("#versionlist").multiselect({
        selectedList:1,
        height:110,
        multiple:false,
        header:false,
        minWidth:130
    });
});

function get_version(platform) {
    platform = $("#platformlist").val()
    var end_date = $("#end_date").val()
    $.ajax({
        type: "POST",
        dataType: "json",
        url: "get_version",
        data: { 
            'platform': platform,
            'end_date': end_date,
        },
        success: function (data) {
            $("#versionlist").empty()
            versions = data["version_choices"];
            is_cdf = data["is_cdf"];
            if(is_cdf == "0")
            {
                $("#versionlist").append("<option value='"+"all"+"' selected>"+"all"+"</option>");
            }
            for(i=0;i<versions.length;i++)
            {
                $("#versionlist").append("<option value='"+versions[i]+"'>"+versions[i]+"</option>");
            }

            $("#versionlist").multiselect('refresh');

        }
    });
}   
</script>


<form method="post">
    <div class="pageitem">
        <span style="float:left;padding-left:1%;"></span>
            {% include 'choose_platform.html'%}
            {% include 'choose_single_version.html'%}
            {% include 'choose_net.html'%}
            {% include 'choose_stat.html' %}
        </span>
        <div class="ctrlbox">
            {% include 'choose_record_limit.html' %}
            <div class="ctrlitem">  
                <label>起始日期</label>
                {% if is_mobile %}
                    <input name="begin_date" type="date" value="{{default_begin_date}}">
                {% else %}
                    <input class="Wdate" name="begin_date" type="text" value="{{default_begin_date}}" onClick="WdatePicker({isShowWeek:true,highLineWeekDay:true})">
                {% endif %}
            </div>
            <div class="ctrlitem">  
                <label>结束日期</label>
                {% if is_mobile %}
                    <input name="end_date" type="date" value="{{default_end_date}}" id="end_date">
                {% else %}
                    <input class="Wdate" name="end_date" type="text" value="{{default_end_date}}" onClick="WdatePicker({isShowWeek:true,highLineWeekDay:true})" id="end_date">
                {% endif %}
            </div>
            <div class="ctrlitem">
                <input type="submit" value="查询">
            </div>
        </div>
    </div>
</form>
